"use strict";(self.webpackChunkmovie_watchlist=self.webpackChunkmovie_watchlist||[]).push([[144],{975:(e,t,s)=>{s.d(t,{A:()=>x});var a=s(43),l=s(3),r=s(965),c=s(579);const o=a.memo((e=>{let{onClick:t,isMovieWatched:s=!1}=e;return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"w-[2rem] h-[2rem]",viewBox:"0 0 256 256",xmlSpace:"preserve",onClick:t,children:[(0,c.jsx)("defs",{}),(0,c.jsx)("g",{transform:"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)",children:(0,c.jsx)("path",{d:"M 89.122 3.486 L 89.122 3.486 c -2.222 -3.736 -7.485 -4.118 -10.224 -0.742 L 33.202 59.083 c -1.118 1.378 -3.245 1.303 -4.262 -0.151 L 17.987 43.291 c -3.726 -5.322 -11.485 -5.665 -15.666 -0.693 l 0 0 c -2.883 3.428 -3.102 8.366 -0.533 12.036 L 24.206 86.65 c 2.729 3.897 8.503 3.89 11.222 -0.014 l 6.435 -9.239 L 88.87 10.265 C 90.28 8.251 90.378 5.598 89.122 3.486 z",style:{fill:s?"lime":"white"},transform:"matrix(1 0 0 1 0 0)",strokeLinecap:"round"})})]})})}));var i=s(692),n=s(68);const d=a.memo((e=>{const{openPopUp:t,closePopUp:s,onSave:l,setIsNewWatchList:r,setSelectedWatchlistName:o,setSelectedWatchListDescription:i,watchlists:d}=e,[m,h]=(0,a.useState)(""),[u,x]=(0,a.useState)(""),[v,p]=(0,a.useState)(""),[w,f]=(0,a.useState)(!1),g=()=>{x(""),h("")};return(0,a.useEffect)((()=>{f("createNew"===m)}),[m]),(0,a.useEffect)((()=>{w?(o(u),i(v),r(!0)):o(m)}),[w,m,u,v,o,i,r]),(0,c.jsxs)(n.A,{open:t,onClose:s,children:[(0,c.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Select the Watchlist"}),(0,c.jsxs)("div",{children:[null===d||void 0===d?void 0:d.map(((e,t)=>(0,c.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"watchlist",value:e,checked:m===e,onChange:()=>h(e),className:"h-4 w-4 text-red-500"}),(0,c.jsx)("span",{children:e})]},t))),(0,c.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,c.jsx)("input",{type:"radio",name:"watchlist",value:"createNew",checked:"createNew"===m,onChange:()=>h("createNew"),className:"form-radio h-4 w-4 text-red-500"}),(0,c.jsx)("span",{children:"Create new watchlist"})]}),w&&(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("input",{type:"text",placeholder:"Enter new watchlist name",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:u,required:!0,onChange:e=>x(e.target.value)}),(0,c.jsx)("input",{type:"text",placeholder:"Enter Description (Optional)",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:v,required:!0,onChange:e=>p(e.target.value)})]})]}),(0,c.jsxs)("div",{className:"mt-4 flex justify-end space-x-4",children:[(0,c.jsx)("button",{className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",onClick:()=>{g(),s()},children:"Cancel"}),(0,c.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded-md disabled:hover:bg-red-500 hover:bg-red-600 disabled:opacity-70",onClick:()=>{g(),l()},disabled:!m&&!u||w&&!u,children:"Save"})]})]})}));var m=s(187),h=s(216),u=s(401);const x=a.memo((e=>{let{isWatchList:t,watchListName:s,movie:n}=e;const{Poster:x,Title:v,imdbID:p,Year:w}=n,[f,g]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[N,y]=(0,a.useState)(""),[L,S]=(0,a.useState)(""),{user:k,isLoggedIn:C}=(0,m.A)(),M=(0,h.zy)(),I=(0,h.Zp)(),W=(0,l.wA)(),A=(0,l.d4)((e=>e.movies.watchlists[k])),R=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.map((e=>e.name))),[A]),z=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.flatMap((e=>e.movies)).some((e=>(null===e||void 0===e?void 0:e.movieId)===p))),[A,p]),E=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.find((e=>e.name===s))),[A,s]),P=(0,a.useMemo)((()=>{var e;return null===E||void 0===E||null===(e=E.movies.find((e=>e.movieId===p)))||void 0===e?void 0:e.watched}),[E,p]),D=(0,a.useCallback)((()=>{g(!1)}),[]),U=(0,a.useCallback)((()=>{W((0,r.w7)({userId:k,movieId:p,watchlistName:N,...j?{watchlistDescription:L}:{}})),g(!1),u.oR.success("Movie added into the watchlist!")}),[W,j,N,L,k,p]),B=(0,a.useCallback)((()=>{if(C())z?(W((0,r.Qv)({userId:k,movieId:p})),u.oR.success("Movie removed from the watchlist!")):g(!0);else{const e=new URLSearchParams(M.search);I("/login?".concat(e.toString())),u.oR.info("Login to create your watchlists.")}}),[W,z,C,M.search,I,k,p]),q=(0,a.useCallback)((()=>{W((0,r.vP)({userId:k,movieId:p,watchListName:s})),u.oR.success("Movie watch option has been updated!")}),[W,k,p,s]);return(0,c.jsxs)("div",{className:"w-[85%] max-w-60 md:w-44 h-[395px] rounded-lg overflow-hidden shadow-xl transition-transform hover:scale-105 mb-8 md:mb-0",children:[(0,c.jsxs)("div",{className:"relative",children:[(0,c.jsx)("img",{src:x,className:"bg-cover w-full h-[280px] md:h-[240px]",alt:"".concat(v," movie")}),t?(0,c.jsx)("div",{className:"absolute top-2 right-2 cursor-pointer",children:(0,c.jsx)(o,{onClick:q,isMovieWatched:P})}):(0,c.jsx)("div",{className:"absolute top-0 left-[calc(-7px)] cursor-pointer",children:(0,c.jsx)(i.A,{onClick:B,isMovieInWatchlist:z})})]}),(0,c.jsxs)("div",{className:"px-4 pt-2",children:[(0,c.jsx)("p",{className:"text-gray-700 text-base text-right",children:"93/100"}),(0,c.jsx)("div",{className:"font-semibold font-sans text-l mt-1",children:v}),(0,c.jsxs)("p",{children:["(",w,")"]})]}),(0,c.jsx)(d,{openPopUp:f,closePopUp:D,onSave:U,watchlists:R,setIsNewWatchList:b,setSelectedWatchlistName:y,setSelectedWatchListDescription:S})]})}))},68:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(43),l=s(950),r=s(579);const c=e=>{let{open:t,onClose:s,children:c}=e;const o=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const e=e=>{o.current&&!o.current.contains(e.target)&&s()};return t?document.addEventListener("pointerdown",e):document.removeEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}}),[t,s]),t?l.createPortal((0,r.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,r.jsx)("div",{ref:o,className:"bg-white p-8 rounded-lg m-5",children:c})}),document.getElementById("portal-root")):null}},144:(e,t,s)=>{s.r(t),s.d(t,{default:()=>u});var a=s(43),l=s(213),r=s(692),c=s(568),o=s(579);const i=a.memo((e=>{let{handleSearch:t,value:s,setValue:l}=e;const r=(0,a.useRef)(null),i=(0,a.useCallback)((e=>{e.preventDefault(),t(r.current.value)}),[t]);return(0,o.jsx)("div",{id:"search-bar",children:(0,o.jsx)("form",{onSubmit:i,children:(0,o.jsxs)("div",{className:"relative mt-10",children:[(0,o.jsx)("input",{className:"appearance-none border-2 pl-10 border-gray-300 hover:border-gray-400 transition-colors rounded-md w-full py-3 px-3 text-gray-800 leading-tight focus:outline-none focus:ring-red-600 focus:border-red-600 focus:shadow-outline",id:"search-query",ref:r,value:s,onChange:e=>l(e.target.value),type:"text",placeholder:"Search..."}),(0,o.jsx)("button",{type:"submit",className:"bg-red-500 absolute right-0 inset-y-0 flex items-center rounded w-fit p-5 text-white text-xl",children:"Search"}),(0,o.jsx)("div",{className:"absolute left-0 inset-y-0 flex items-center",children:(0,o.jsx)(c.A,{})})]})})})}));var n=s(679),d=s(216),m=s(401),h=s(975);const u=()=>{const[e,t]=(0,a.useState)([]),[s,c]=(0,a.useState)(!1),[u,x]=(0,a.useState)(!1),[v,p]=(0,a.useState)(!1),[w,f]=(0,a.useState)(""),g=(0,d.zy)(),j=(0,d.Zp)(),b=new URLSearchParams(g.search).get("search")||"",N=(0,a.useCallback)((e=>{const t=new URLSearchParams(g.search);t.set("search",e),j({search:t.toString()})}),[g.search,j]),y=(0,a.useCallback)((async e=>{if(""!==e)try{c(!0),p(!0),N(e);const s=await l.A.get("https://www.omdbapi.com/?apiKey=".concat("872708d5","&s=").concat(e));t(s.data.Search||[])}catch(s){x(!0),m.oR.error("Something went wrong!"),console.error("Error fetching data:",s)}finally{c(!1)}}),[N]);(0,a.useEffect)((()=>{f(b),y(b)}),[b,y]);return(0,o.jsxs)("div",{className:"w-full mx-5 md:mx-16 mt-20 md:mt-8 flex flex-col flex-grow",children:[(0,o.jsxs)("div",{id:"cover-card",className:"flex flex-col border-4 border-red-700 p-6 w-full rounded-md",children:[(0,o.jsxs)("h1",{className:"text-2xl md:text-5xl",children:["Welcome to ",(0,o.jsx)("span",{className:"text-red-600",children:"Watchlists"})]}),(0,o.jsx)("br",{}),(0,o.jsx)("p",{className:"text-md md:text-xl md:py-2",children:"Browse movies, add them to watchlists, and share them with friends."}),(0,o.jsxs)("div",{className:"text-md md:text-xl mt-1",children:["Just click the ",(0,o.jsx)(r.A,{})," to add a movie, the poster to see more details, and click to mark the movie as watched."]})]}),(0,o.jsx)(i,{value:w,setValue:f,handleSearch:()=>{y(w)}}),s?(0,o.jsx)(n.A,{}):u?(0,o.jsx)("p",{className:"flex flex-wrap justify-center items-center h-full font-semibold text-red-500",children:"Something went wrong! Please try again later."}):(0,o.jsx)("div",{id:"movie-list",className:"flex flex-wrap justify-center gap-8 md:justify-start md:gap-10 mt-10 m-auto",children:e.length?e.map((e=>(0,o.jsx)(h.A,{movie:e},e.imdbID))):v&&(0,o.jsx)("p",{className:"font-semibold",children:"No Movies Available!"})})]})}},692:(e,t,s)=>{s.d(t,{A:()=>c});var a=s(43),l=s(579);const r=a.memo((e=>{let{onClick:t,isMovieInWatchlist:s=!1}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 83.02 122.88",className:"w-[2rem] h-[2rem] md:w-[3rem] md:h-[3rem] opacity-80 inline",onClick:t,children:[(0,l.jsx)("style",{children:".st0{fillRule:evenodd;clipRule:evenodd;}"}),(0,l.jsx)("g",{children:(0,l.jsx)("path",{style:{fill:s?"lime":"black"},d:"M83.02,0L0,0l0.37,122.88l40.99-22.18l40.26,21.88L83.02,0L83.02,0z M47.48,25.82L41.51,7.54 c5.8,0,10.94,1.64,15.46,4.92c4.51,3.27,7.74,7.73,9.73,13.36H47.48L47.48,25.82z M51.14,37.17l15.57-11.31 c0.85,3.05,1.28,5.81,1.28,8.27c0,8.71-3.64,15.82-10.92,21.33L51.14,37.17L51.14,37.17L51.14,37.17z M41.51,44.14l15.56,11.31 c-4.91,3.36-10.1,5.05-15.56,5.05c-5.44,0-10.63-1.68-15.56-5.05L41.51,44.14L41.51,44.14z M31.89,37.17l-5.94,18.28 c-7.28-5.75-10.92-12.88-10.92-21.4c0-2.48,0.44-5.22,1.32-8.2L31.89,37.17L31.89,37.17L31.89,37.17z M35.58,25.82H16.35 c1.94-5.61,5.17-10.05,9.7-13.35c4.53-3.28,9.69-4.93,15.46-4.93L35.58,25.82L35.58,25.82L35.58,25.82z"})})]})})})),c=a.memo(r)},568:(e,t,s)=>{s.d(t,{A:()=>r});var a=s(43),l=s(579);const r=a.memo((()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 ml-3 text-gray-400 hover:text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,l.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})))}}]);
//# sourceMappingURL=144.48c7234e.chunk.js.map