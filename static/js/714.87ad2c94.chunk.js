"use strict";(self.webpackChunkmovie_watchlist=self.webpackChunkmovie_watchlist||[]).push([[714],{975:(e,t,s)=>{s.d(t,{A:()=>p});var a=s(43),i=s(3),o=s(965),l=s(579);const n=a.memo((e=>{let{onClick:t,isMovieWatched:s=!1}=e;return(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",className:"w-[2rem] h-[2rem]",viewBox:"0 0 256 256",xmlSpace:"preserve",onClick:t,children:[(0,l.jsx)("defs",{}),(0,l.jsx)("g",{transform:"translate(1.4065934065934016 1.4065934065934016) scale(2.81 2.81)",children:(0,l.jsx)("path",{d:"M 89.122 3.486 L 89.122 3.486 c -2.222 -3.736 -7.485 -4.118 -10.224 -0.742 L 33.202 59.083 c -1.118 1.378 -3.245 1.303 -4.262 -0.151 L 17.987 43.291 c -3.726 -5.322 -11.485 -5.665 -15.666 -0.693 l 0 0 c -2.883 3.428 -3.102 8.366 -0.533 12.036 L 24.206 86.65 c 2.729 3.897 8.503 3.89 11.222 -0.014 l 6.435 -9.239 L 88.87 10.265 C 90.28 8.251 90.378 5.598 89.122 3.486 z",style:{fill:s?"lime":"white"},transform:"matrix(1 0 0 1 0 0)",strokeLinecap:"round"})})]})})}));var r=s(692),c=s(68);const d=a.memo((e=>{const{openPopUp:t,closePopUp:s,onSave:i,setIsNewWatchList:o,setSelectedWatchlistName:n,setSelectedWatchListDescription:r,watchlists:d}=e,[m,h]=(0,a.useState)(""),[u,p]=(0,a.useState)(""),[x,v]=(0,a.useState)(""),[w,f]=(0,a.useState)(!1),g=()=>{p(""),h("")};return(0,a.useEffect)((()=>{f("createNew"===m)}),[m]),(0,a.useEffect)((()=>{w?(n(u),r(x),o(!0)):n(m)}),[w,m,u,x,n,r,o]),(0,l.jsxs)(c.A,{open:t,onClose:s,children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Select the Watchlist"}),(0,l.jsxs)("div",{children:[null===d||void 0===d?void 0:d.map(((e,t)=>(0,l.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"radio",name:"watchlist",value:e,checked:m===e,onChange:()=>h(e),className:"h-4 w-4 text-red-500"}),(0,l.jsx)("span",{children:e})]},t))),(0,l.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,l.jsx)("input",{type:"radio",name:"watchlist",value:"createNew",checked:"createNew"===m,onChange:()=>h("createNew"),className:"form-radio h-4 w-4 text-red-500"}),(0,l.jsx)("span",{children:"Create new watchlist"})]}),w&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("input",{type:"text",placeholder:"Enter new watchlist name",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:u,required:!0,onChange:e=>p(e.target.value)}),(0,l.jsx)("input",{type:"text",placeholder:"Enter Description (Optional)",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:x,required:!0,onChange:e=>v(e.target.value)})]})]}),(0,l.jsxs)("div",{className:"mt-4 flex justify-end space-x-4",children:[(0,l.jsx)("button",{className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",onClick:()=>{g(),s()},children:"Cancel"}),(0,l.jsx)("button",{className:"bg-red-500 text-white px-4 py-2 rounded-md disabled:hover:bg-red-500 hover:bg-red-600 disabled:opacity-70",onClick:()=>{g(),i()},disabled:!m&&!u||w&&!u,children:"Save"})]})]})}));var m=s(187),h=s(216),u=s(401);const p=a.memo((e=>{let{isWatchList:t,watchListName:s,movie:c}=e;const{Poster:p,Title:x,imdbID:v,Year:w}=c,[f,g]=(0,a.useState)(!1),[j,b]=(0,a.useState)(!1),[N,y]=(0,a.useState)(""),[L,C]=(0,a.useState)(""),{user:S,isLoggedIn:k}=(0,m.A)(),M=(0,h.zy)(),I=(0,h.Zp)(),W=(0,i.wA)(),A=(0,i.d4)((e=>e.movies.watchlists[S])),E=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.map((e=>e.name))),[A]),P=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.flatMap((e=>e.movies)).some((e=>(null===e||void 0===e?void 0:e.movieId)===v))),[A,v]),D=(0,a.useMemo)((()=>null===A||void 0===A?void 0:A.find((e=>e.name===s))),[A,s]),R=(0,a.useMemo)((()=>{var e;return null===D||void 0===D||null===(e=D.movies.find((e=>e.movieId===v)))||void 0===e?void 0:e.watched}),[D,v]),U=(0,a.useCallback)((()=>{g(!1)}),[]),z=(0,a.useCallback)((()=>{W((0,o.w7)({userId:S,movieId:v,watchlistName:N,...j?{watchlistDescription:L}:{}})),g(!1),u.oR.success("Movie added into the watchlist!")}),[W,j,N,L,S,v]),F=(0,a.useCallback)((()=>{if(k())P?(W((0,o.Qv)({userId:S,movieId:v})),u.oR.success("Movie removed from the watchlist!")):g(!0);else{const e=new URLSearchParams(M.search);I("/login?".concat(e.toString())),u.oR.info("Login to create your watchlists.")}}),[W,P,k,M.search,I,S,v]),B=(0,a.useCallback)((()=>{W((0,o.vP)({userId:S,movieId:v,watchListName:s})),u.oR.success("Movie watch option has been updated!")}),[W,S,v,s]);return(0,l.jsxs)("div",{className:"w-[85%] max-w-60 md:w-44 h-[395px] rounded-lg overflow-hidden shadow-xl transition-transform hover:scale-105 mb-8 md:mb-0",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("img",{src:p,className:"bg-cover w-full h-[280px] md:h-[240px]",alt:"".concat(x," movie")}),t?(0,l.jsx)("div",{className:"absolute top-2 right-2 cursor-pointer",children:(0,l.jsx)(n,{onClick:B,isMovieWatched:R})}):(0,l.jsx)("div",{className:"absolute top-0 left-[calc(-7px)] cursor-pointer",children:(0,l.jsx)(r.A,{onClick:F,isMovieInWatchlist:P})})]}),(0,l.jsxs)("div",{className:"px-4 pt-2",children:[(0,l.jsx)("p",{className:"text-gray-700 text-base text-right",children:"93/100"}),(0,l.jsx)("div",{className:"font-semibold font-sans text-l mt-1",children:x}),(0,l.jsxs)("p",{children:["(",w,")"]})]}),(0,l.jsx)(d,{openPopUp:f,closePopUp:U,onSave:z,watchlists:E,setIsNewWatchList:b,setSelectedWatchlistName:y,setSelectedWatchListDescription:C})]})}))},68:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(43),i=s(950),o=s(579);const l=e=>{let{open:t,onClose:s,children:l}=e;const n=(0,a.useRef)(null);return(0,a.useEffect)((()=>{const e=e=>{n.current&&!n.current.contains(e.target)&&s()};return t?document.addEventListener("pointerdown",e):document.removeEventListener("pointerdown",e),()=>{document.removeEventListener("pointerdown",e)}}),[t,s]),t?i.createPortal((0,o.jsx)("div",{className:"fixed top-0 left-0 w-full h-full bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,o.jsx)("div",{ref:n,className:"bg-white p-8 rounded-lg m-5",children:l})}),document.getElementById("portal-root")):null}},714:(e,t,s)=>{s.r(t),s.d(t,{default:()=>v});var a=s(43),i=s(216),o=s(579);const l=a.memo((e=>{let{onClick:t}=e;return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("svg",{className:"cursor-pointer feather feather-edit",fill:"none",height:"30",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24",width:"30",xmlns:"http://www.w3.org/2000/svg",onClick:t,children:[(0,o.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,o.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})})}));var n=s(3),r=s(187),c=s(213),d=s(679),m=s(68);const h=a.memo((e=>{let{openPopUp:t,closePopUp:s,onSave:i,name:l,description:n,setWatchlistMetaData:r}=e;const[c,d]=(0,a.useState)(l),[h,u]=(0,a.useState)(n);(0,a.useEffect)((()=>{r({name:c,description:h})}),[c,h,r]);return(0,o.jsx)(m.A,{open:t,onClose:s,children:(0,o.jsxs)("form",{onSubmit:e=>{e.preventDefault(),i()},children:[(0,o.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Update Watchlist Name and Description."}),(0,o.jsxs)("div",{children:[(0,o.jsx)("input",{type:"text",placeholder:"Enter new watchlist name",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:c,required:!0,onChange:e=>d(e.target.value)}),(0,o.jsx)("input",{type:"text",placeholder:"Enter Description (Optional)",className:"mt-2 w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring focus:ring-red-500",value:h,onChange:e=>u(e.target.value)})]}),(0,o.jsxs)("div",{className:"mt-4 flex justify-end space-x-4",children:[(0,o.jsx)("button",{type:"button",className:"bg-gray-200 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-300",onClick:()=>s(),children:"Cancel"}),(0,o.jsx)("button",{type:"submit",className:"bg-red-500 text-white px-4 py-2 rounded-md disabled:hover:bg-red-500 hover:bg-red-600 disabled:opacity-70",disabled:!c,children:"Save"})]})]})})}));var u=s(965),p=s(401),x=s(975);const v=()=>{const e=(0,i.Zp)(),t=(0,n.wA)(),{user:s,isLoggedIn:m}=(0,r.A)(),{watchlist:v}=(0,i.g)(),w=(0,n.d4)((e=>e.movies.watchlists[s])),f=decodeURIComponent(v),g=null===w||void 0===w?void 0:w.find((e=>e.name===f)),[j,b]=(0,a.useState)([]),[N,y]=(0,a.useState)(!1),[L,C]=(0,a.useState)(!1),[S,k]=(0,a.useState)(!1),[M,I]=(0,a.useState)({name:"",description:""}),W=(0,a.useCallback)((async()=>{try{y(!0);const e=null===g||void 0===g?void 0:g.movies,t=null===e||void 0===e?void 0:e.map((async e=>(await c.A.get("https://www.omdbapi.com/?apikey=".concat("872708d5","&i=").concat(e.movieId))).data)),s=await Promise.all(t);b(s)}catch(e){C(!0),p.oR.error("Something went wrong!"),console.error("Error fetching data:",e)}finally{y(!1)}}),[null===g||void 0===g?void 0:g.movies]);(0,a.useEffect)((()=>{m()&&W()}),[W,m]);return m()?(0,o.jsxs)("div",{className:"w-full mt-16 mx-5 md:mx-16 md:mt-8 flex flex-col flex-grow",children:[(0,o.jsxs)("div",{id:"watchlist-header",children:[(0,o.jsxs)("h2",{className:"text-[2.5rem] font-semibold flex gap-5 items-center",children:[f," ",(0,o.jsx)(l,{onClick:()=>k(!0)})]}),(0,o.jsx)("h4",{className:"font-md text-[1.3rem] font-medium mt-4",children:"About this watchlist"}),(0,o.jsx)("p",{children:null===g||void 0===g?void 0:g.description})]}),(0,o.jsx)("div",{id:"movies",children:N?(0,o.jsx)(d.A,{}):L?(0,o.jsx)("p",{className:"flex flex-wrap justify-center items-center h-full font-semibold text-red-500",children:"Something went wrong! Please try again later."}):(0,o.jsx)("div",{id:"movie-list",className:"flex flex-wrap justify-center gap-8 md:justify-start md:gap-10 mt-10 m-auto",children:j&&j.length?j.map((e=>(0,o.jsx)(x.A,{movie:e,isWatchList:!0,watchListName:f},e.imdbID))):(0,o.jsx)("p",{className:"font-semibold",children:"No Movies Added!"})})}),(0,o.jsx)(h,{name:f,description:null===g||void 0===g?void 0:g.description,openPopUp:S,closePopUp:()=>k(!1),setWatchlistMetaData:I,onSave:()=>{t((0,u.CF)({userId:s,watchlistName:f,newName:M.name,newDescription:M.description})),k(!1),p.oR.success("Watchlist updated!"),e("/watchlist/".concat(M.name))}})]}):(e("/login"),p.oR.info("Login to create your watchlists."),null)}},692:(e,t,s)=>{s.d(t,{A:()=>l});var a=s(43),i=s(579);const o=a.memo((e=>{let{onClick:t,isMovieInWatchlist:s=!1,coverIcon:a=!1}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 83.02 122.88",className:"opacity-80 inline ".concat(a?"w-[2rem] h-[2rem] md:w-[3rem] md:h-[3rem]":"w-[3rem] h-[3rem]"),onClick:t,children:[(0,i.jsx)("style",{children:".st0{fillRule:evenodd;clipRule:evenodd;}"}),(0,i.jsx)("g",{children:(0,i.jsx)("path",{style:{fill:s?"lime":"black"},d:"M83.02,0L0,0l0.37,122.88l40.99-22.18l40.26,21.88L83.02,0L83.02,0z M47.48,25.82L41.51,7.54 c5.8,0,10.94,1.64,15.46,4.92c4.51,3.27,7.74,7.73,9.73,13.36H47.48L47.48,25.82z M51.14,37.17l15.57-11.31 c0.85,3.05,1.28,5.81,1.28,8.27c0,8.71-3.64,15.82-10.92,21.33L51.14,37.17L51.14,37.17L51.14,37.17z M41.51,44.14l15.56,11.31 c-4.91,3.36-10.1,5.05-15.56,5.05c-5.44,0-10.63-1.68-15.56-5.05L41.51,44.14L41.51,44.14z M31.89,37.17l-5.94,18.28 c-7.28-5.75-10.92-12.88-10.92-21.4c0-2.48,0.44-5.22,1.32-8.2L31.89,37.17L31.89,37.17L31.89,37.17z M35.58,25.82H16.35 c1.94-5.61,5.17-10.05,9.7-13.35c4.53-3.28,9.69-4.93,15.46-4.93L35.58,25.82L35.58,25.82L35.58,25.82z"})})]})})})),l=a.memo(o)}}]);
//# sourceMappingURL=714.87ad2c94.chunk.js.map